{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "AVR Assembly",
  "scopeName": "source.avr-asm",
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "include": "#preprocessor"
    },
    {
      "include": "#labels"
    },
    {
      "include": "#directives"
    },
    {
      "include": "#registers"
    },
    {
      "include": "#instructions"
    },
    {
      "include": "#numbers"
    },
    {
      "include": "#strings"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.semicolon.avr-asm",
          "match": ";.*$"
        },
        {
          "name": "comment.line.double-slash.avr-asm",
          "match": "//.*$"
        },
        {
          "name": "comment.block.c.avr-asm",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },
    "preprocessor": {
      "patterns": [
        {
          "name": "meta.preprocessor.avr-asm",
          "match": "^\\s*#\\s*(?:include|define|if|ifdef|ifndef|elif|else|endif|error|warning|pragma)\\b.*$"
        }
      ]
    },
    "labels": {
      "patterns": [
        {
          "name": "entity.name.label.avr-asm",
          "match": "^\\s*([A-Za-z_.$][A-Za-z0-9_.$]*)\\s*:"
        }
      ]
    },
    "directives": {
      "patterns": [
        {
          "name": "keyword.control.directive.avr-asm",
          "match": "(?i)\\.(?:global|globl|extern|section|text|data|bss|byte|word|long|ascii|asciz|equ|set|org|align|macro|endm|type|size)\\b"
        }
      ]
    },
    "registers": {
      "patterns": [
        {
          "name": "variable.language.register.avr-asm",
          "match": "(?i)\\b(?:r[0-9]|r[1-2][0-9]|r3[0-1]|x|y|z)\\b"
        }
      ]
    },
    "instructions": {
      "patterns": [
        {
          "name": "keyword.other.instruction.avr-asm",
          "match": "(?i)\\b(?:adc|add|adiw|and|andi|asr|bclr|bld|brbc|brbs|brcc|brcs|break|breq|brge|brhc|brhs|brid|brie|brlo|brlt|brmi|brne|brpl|brsh|brtc|brts|brvc|brvs|bset|bst|call|cbi|cbr|clc|clh|cli|cln|clr|cls|clt|clv|clz|com|cp|cpc|cpi|cpse|dec|eicall|eijmp|elpm|eor|fmul|fmuls|fmulsu|icall|ijmp|in|inc|jmp|lac|las|lat|ld|ldd|ldi|lds|lpm|lsl|lsr|mov|movw|mul|muls|mulsu|neg|nop|or|ori|out|pop|push|rcall|ret|reti|rjmp|rol|ror|sbc|sbci|sbi|sbic|sbis|sbiw|sbr|sbrc|sbrs|sec|seh|sei|sen|ser|ses|set|sev|sez|sleep|spm|st|std|sts|sub|subi|swap|tst|wdr|xch)\\b"
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.hex.avr-asm",
          "match": "\\b0x[0-9A-Fa-f]+\\b"
        },
        {
          "name": "constant.numeric.binary.avr-asm",
          "match": "\\b0b[01]+\\b"
        },
        {
          "name": "constant.numeric.decimal.avr-asm",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.avr-asm",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.avr-asm",
              "match": "\\\\."
            }
          ]
        }
      ]
    }
  }
}

